var Router={routes:{GET___fetch_profiler_data:{pattern:"/__fetch_profiler_data",requirements:[],defaults:{_controller:{}},variables:[]},index:{pattern:"/",requirements:[],defaults:{_controller:{}},variables:[]},mark_category:{pattern:"/kategorie/{id}/ustaw-zaznaczenie/{bool}",requirements:{id:"\\d+"},defaults:{_controller:{}},variables:["id","bool"]}},get:function(c,g){if(this.routes[c]){g=g==undefined?{}:g;var b=this.routes[c],d=b.requirements,e=b.defaults,h=b.variables,a=b.pattern,f;for(param in h){param=h[param];console.log(param);f=g[param]!=undefined?g[param]:e[param];console.log(f);if(f==undefined){throw'Missing "'+param+'" parameter for route "'+c+'"!'}if(d[param]&&!new RegExp(d[param]).test(f)){throw'Parameter "'+param+'" for route "'+c+'" must pass "'+d[param]+'" test!'}a=a.replace("{"+param+"}",f)}console.log(a);return a}else{throw'Undefined route "'+c+'"!'}}};(function(){$(function(){jQuery.writeCookie=function(c,d,e){var b,a;a="";if(e){b=new Date();b.setTime(b.getTime()+(e*86400000));a="; expires="+b.toGMTString()}document.cookie=c+"="+d+a+"; path=/";return true};jQuery.readCookie=function(b){var g,a,d,f,e;f=b+"=";a=document.cookie.split(";");for(d=0,e=a.length;0<=e?d<e:d>e;0<=e?d++:d--){g=a[d];while(g.charAt(0)===" "){g=g.substring(1,g.length)}if(g.indexOf(f)===0){return g.substring(f.length,g.length)}}return null};$("#intro .hide-info").click(function(){$("#intro").slideUp("fast",function(){$.writeCookie("hide-intro",true);return true});return true});$("#bookmark-widget .close, #bookmark-widget .cancel").click(function(){$("#bookmark-widget").hide("fast");return true});$("#bookmark-widget .add-category").keyup(function(b){var a;if(b.keyCode===13){b.preventDefault();a=$('<span class="btn small" />').text($(this).val());$("#bookmark-widget .categories").append(a).show()}return true});$("#add-button").click(function(){$("#bookmark-widget").show(function(){var a,c,b;b=$(".categories .selected");a=$("#bookmark-widget .categories");c=$('<span class="btn small" />;');if(b.length>0){a.html("");b.each(function(){var d;d=c.clone().text($(this).text());a.append(d);return true});a.show()}else{a.hide()}return true});return true});$(".categories .columns").click(function(a){if(a.ctrlKey===true){a.preventDefault();$(this).toggleClass("selected")}else{if($(a.srcElement).hasClass("category-actions")){return}$(this).toggleClass("expanded").parent().isotope("reLayout")}return true}).find("span").live("click",function(){var c,b,a,d;b=$(this);a=$("#category-manager");c=b.parents(".columns");if(a.data("category-id")===c.data("id")&&a.is(":visible")){a.hide();c.removeClass("active")}else{a.css({top:b.offset().top+16,left:b.offset().left+b.outerWidth()/2-a.outerWidth()/2}).data("category-id",c.data("id"));d=a.find(".star").removeClass("on");if(c.data("marked")){d.addClass("on")}$(".categories .columns").removeClass("active");c.addClass("active");a.show()}return true});$("#category-manager .star").click(function(){var a,b;b=$(this);b.toggleClass("on");a=b.hasClass("on");$.get(Router.get("mark_category",{id:$("#category-manager").data("category-id"),bool:(a?1:0)}),function(){var e,c,f,d;if(a){d=$("#marked-categories");c=$("#normal-categories")}else{d=$("#normal-categories");c=$("#marked-categories")}f=$("#category-manager").data("category-id");e=$("#category-"+f);e.data("marked",a);d.find(".categories").isotope("insert",e.clone(true,true));c.find(".categories").isotope("remove",e);$(".categories").isotope("reLayout");if(c.find(".columns").length===0){c.hide()}if(!d.is(":visible")){d.show()}return true});return true});$("#load").ajaxStart(function(){return $(this).show()}).ajaxStop(function(){return $(this).hide()});$(document).click(function(a){if(!$(a.target).hasClass("category-actions")){$("#category-manager").hide();$(".categories .columns").removeClass("active");return true}});$(document).keyup(function(a){if(a.keyCode===83&&!$(a.target).is("input")){$("#category-manager").hide();$("#search").show();$("#search-input").val("").trigger("keyup").focus()}if(a.keyCode===27){$("#search").hide();return $("#search-input").val("").trigger("keyup").blur()}});$("#search-input").keyup(function(){var a,b,c;c=$(this).val();b=c.length>0&&c[0]==="#"?"categories":"bookmarks";c=c.replace("#","");a=c.length;if(a===0){$(".categories").isotope({filter:"*"});true}if(b==="categories"){$(".categories").isotope({filter:':contains("'+c+'")'})}$("#category-manager").hide();return true});$(".categories").isotope({itemSelector:".columns",masonry:{columnWidth:240},getSortData:{name:function(a){return a.data("name")}},sortBy:"name"});$(".categories-block h6 ul a").click(function(d){var a,c,b;d.preventDefault();b=$(this);c=b.data("layout");a=b.parents(".categories-block").find(".categories");if(a.data("layout")===c){return}b.parents("ul").find("a").toggleClass("active");a.find(".columns").removeClass("expanded");return a.toggleClass("grid list").data("layout",c).isotope({layoutMode:c})});return true})}).call(this);